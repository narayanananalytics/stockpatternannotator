<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Stock Pattern Annotator{% endblock %}</title>

    <!-- Tailwind CSS from CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- HTMX for dynamic updates -->
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>

    <!-- Chart.js for visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0"></script>

    <!-- Custom styles -->
    <style>
        .status-badge {
            @apply px-3 py-1 rounded-full text-sm font-medium;
        }
        .status-pending { @apply bg-yellow-100 text-yellow-800; }
        .status-running { @apply bg-blue-100 text-blue-800; }
        .status-completed { @apply bg-green-100 text-green-800; }
        .status-failed { @apply bg-red-100 text-red-800; }
    </style>

    {% block extra_head %}{% endblock %}
</head>
<body class="h-full bg-gray-50">
    <div class="min-h-full">
        <!-- Navigation -->
        <nav class="bg-white shadow-sm">
            <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
                <div class="flex h-16 justify-between">
                    <div class="flex">
                        <div class="flex flex-shrink-0 items-center">
                            <h1 class="text-xl font-bold text-gray-900">ðŸ“ˆ Stock Pattern Annotator</h1>
                        </div>
                        <div class="hidden sm:ml-6 sm:flex sm:space-x-8">
                            <a href="/" class="inline-flex items-center border-b-2 {% if request.url.path == '/' %}border-indigo-500 text-gray-900{% else %}border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700{% endif %} px-1 pt-1 text-sm font-medium">
                                New Job
                            </a>
                            <a href="/jobs" class="inline-flex items-center border-b-2 {% if request.url.path == '/jobs' %}border-indigo-500 text-gray-900{% else %}border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700{% endif %} px-1 pt-1 text-sm font-medium">
                                My Jobs
                            </a>
                        </div>
                    </div>
                    <div class="flex items-center">
                        <span class="text-sm text-gray-600">{{ user_email }}</span>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Page Content -->
        <main>
            {% block content %}{% endblock %}
        </main>
    </div>

    <!-- Toast notifications -->
    <div id="toast" class="hidden fixed bottom-4 right-4 bg-white shadow-lg rounded-lg p-4 max-w-sm">
        <div id="toast-content"></div>
    </div>

    <script>
        // Utility functions
        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            const content = document.getElementById('toast-content');
            const colors = {
                'success': 'text-green-800 bg-green-50',
                'error': 'text-red-800 bg-red-50',
                'info': 'text-blue-800 bg-blue-50'
            };
            content.className = `p-3 rounded ${colors[type]}`;
            content.textContent = message;
            toast.classList.remove('hidden');
            setTimeout(() => toast.classList.add('hidden'), 3000);
        }

        // Format numbers
        function formatNumber(num, decimals = 2) {
            return num.toLocaleString('en-US', {
                minimumFractionDigits: decimals,
                maximumFractionDigits: decimals
            });
        }

        // Format percentage
        function formatPercent(num, decimals = 2) {
            return (num >= 0 ? '+' : '') + formatNumber(num, decimals) + '%';
        }
    </script>

    {% block extra_scripts %}{% endblock %}
</body>
</html>
